---
title: 'Pullitzer Progress'
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
pullitzer <- read.csv("pullitzer.csv")
library(ggplot2)
library(dplyr)
library(cowplot)
```


Several years ago, I resolved to read more books, but was a bit lost as to how go about it.
I figured award-winning books were a good start, and no better system than the Pulitzer, which
has "History" and "General Non-Fiction" categories that I now try to read from. 

My goal is to have read at least one of the finalists from each Pullitzer year (and to see how far back I can go too).
The chart below shows the Pullitzer years I've covered (as well as how big my pullitzer database is getting).


```{r pullitzer-by-year, message=FALSE, warning=FALSE}
pullitzer_years <- pullitzer %>%
  group_by(year, category) %>%
  summarise(Books = sum(read)) %>%
  mutate(category = recode(category, 
                           'history' = "History",
                           'general-nonfiction' = 'General Nonfiction'))

min_pullitzer_year <- min(pullitzer$year)
max_pullitzer_year <- max(pullitzer$year)

bar_colors <- c("#7a5195", "#ef5675")

ggplot(pullitzer_years, aes(x = year, y = Books, fill = category)) +
  geom_col() +
  scale_fill_manual(values = bar_colors) +
  geom_hline(data = data.frame(x = seq(0, 4, 1)),
               aes(yintercept = x), color = "white", size = 0.5) +
  scale_x_continuous(breaks = c(min_pullitzer_year:max_pullitzer_year)) +
  theme(
    legend.position = "bottom",
    legend.title = element_blank(),
    panel.background = element_blank(),
    axis.title.x = element_blank()
  )

```

## The full list

These are the finalists and winners of general nonfiction and history, and my progress in reading them.

```{r over-time, echo=FALSE}
library(reactable)
plot_table <- pullitzer %>%
  arrange(desc(year), desc(category), desc(award)) %>%
  mutate(across(c(read,author.of.color,author.female), ~ifelse(.x == 1,'Yes','No'))) %>%
  select(-long.title)

reactable(plot_table,
          columns = list(
            year = colDef(name = "Year"),
            short.title = colDef(name = "Title",
                                 minWidth = 150),
            author = colDef(name = "Author"),
            read = colDef(name = "Read",
                          cell = function(value) {
                            # Render as an X mark or check mark
                            if (value == "No") "\u274c" else "\u2714\ufe0f"
                          },
                          maxWidth = 75),
            award = colDef(name = "Award"),
            category = colDef(name = "Category"),
            author.of.color = colDef(name = 'Author of Color'),
            author.female = colDef(name = 'Female Author')),
          sortable = TRUE,
          showSortable = TRUE,
          defaultPageSize = 20,
          rowStyle = function(index) {
            if (plot_table[index,"read"] == 'Yes') {
              list(fontWeight = "bold")
            }
          })

```